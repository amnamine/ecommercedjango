{% extends 'base.html' %}
{% block title %}Your Cart · E‑Shop{% endblock %}
{% block content %}
<h1 class="h1">Your Cart</h1>
<div class="cart">
  {% for item in items %}
    <div class="cart-row hover-rise">
      <div class="cart-name">{{ item.product.name }}</div>
      <form method="post" action="{% url 'shop:update_cart' item.product.id %}" class="cart-qty" style="display:flex;gap:8px;align-items:center">
        {% csrf_token %}
        <input type="number" name="qty" min="0" value="{{ item.qty }}" style="width:70px" />
        <button class="btn" type="submit">Update</button>
      </form>
      <div class="cart-price">${{ item.subtotal }}</div>
      <a class="btn outline" href="{% url 'shop:remove_from_cart' item.product.id %}">−</a>
    </div>
  {% empty %}
    <p class="muted">Your cart is empty.</p>
  {% endfor %}
  <div class="cart-total">
    <span>Total</span>
    <strong>${{ total }}</strong>
  </div>
  {% if items %}
  <a class="btn" href="{% url 'shop:checkout' %}">Checkout</a>
  <a class="btn outline" href="{% url 'shop:clear_cart' %}">Clear cart</a>
  {% endif %}
</div>
{% endblock %}
